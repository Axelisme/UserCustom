#:schema https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

version: 2
final_space: true
console_title_template: "{{ .Shell }} in {{ .Folder }}"
shell_integration: true

blocks:
  - type: prompt
    alignment: left
    segments:
      - type: os
        style: diamond
        background_templates:
          - "{{ if gt .Code 0 }}#cc2222{{ end }}"
          - "{{ if eq .Code 0 }}#d3d7cf{{ end }}"
        foreground: "#000000"

      - type: ipify
        style: powerline
        powerline_symbol: 
        background: "#333333"
        foreground: "#d3d7cf"
        template: "{{ if .Env.SSH_TTY }} {{ .IP }} {{ end }}"
        properties:
          cache_timeout: 5
          http_timeout: 1000

      - type: path
        style: powerline
        background: "#3465a4"
        foreground: "#e4e4e4"
        powerline_symbol: 
        template: "  {{ .Path }} "
        properties:
          max_width: 30
          style: powerlevel

      - type: git
        style: powerline
        powerline_symbol: 
        foreground: "#000000"
        background: "#4e9a06"
        background_templates:
          - "{{ if or (.Working.Changed) (.Staging.Changed) }}#FFEB3B{{ end }}"
          - "{{ if and (gt .Ahead 0) (gt .Behind 0) }}#FFCC80{{ end }}"
          - "{{ if gt .Ahead 0 }}#B388FF{{ end }}"
          - "{{ if gt .Behind 0 }}#B388FB{{ end }}"
        template:
          "{{ .HEAD }}{{ if gt .Ahead 0 }} ↑{{.Ahead}}{{end}}{{ if gt .Behind 0
          }} ↓{{.Behind}}{{end}} {{ if .Working.Changed }}+{{ .Working.Added }}
          ~{{ .Working.Modified }} -{{ .Working.Deleted }} {{ end }}"
        properties:
          branch_icon: " "
          fetch_status: true

  - type: rprompt
    overflow: hidden
    segments:
      - type: executiontime
        style: powerline
        background: "#c4a000"
        foreground: "#000000"
        leading_powerline_symbol: 
        invert_powerline: true
        template: " {{ .FormattedMs }}  "
        properties:
          threshold: 1000

      - type: root
        style: powerline
        background: "#ffff66"
        foreground: "#111111"
        leading_powerline_symbol: 
        invert_powerline: true
        template: "  "

      - type: python
        style: powerline
        background: "#FFDE57"
        foreground: "#111111"
        leading_powerline_symbol: 
        invert_powerline: true
        template:
          " {{ if .Error }}{{ .Error }}{{ else }}{{ if .Venv }}{{ .Venv }} {{
          end }}{{ end }}"
        properties:
          home_enabled: true
          fetch_version: false

      - type: text
        style: powerline
        background: "#ffff66"
        foreground: "#111111"
        leading_powerline_symbol: 
        invert_powerline: true
        template: " {{ if .Env.YAZI_LEVEL }} yazi {{ end }} "

  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: text
        style: plain
        background: transparent
        foreground: green
        template: ❯

transient_prompt:
  background: transparent
  foreground: green
  template: "❯ "

secondary_prompt:
  background: transparent
  foreground: green
  template: "❯❯ "
